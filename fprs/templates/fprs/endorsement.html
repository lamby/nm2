{% extends "restricted/base.html" %}
{% load nm %}
{% load js %}

{% block head_resources %}
{{block.super}}
{% jsinclude "nm" %}
<style type="text/css">
.errorlist { color: red; }
</style>
{% endblock %}

{% block breadcrumbs %}{{block.super}}
/ <a href="{{ person.get_absolute_url }}">{{person.lookup_key}}</a>
/ <a href="{% url 'fprs_person_list' key=person.lookup_key %}">key list</a>
{% endblock %}

{% block relatedpages %}
<a href="{{person.get_absolute_url}}">{{person.lookup_key}}</a>
{{block.super}}
{% endblock %}

{% block content %}

<h1>Manage agreements for key {{keyid}}</h1>

<p>Every Debian Contributor, to gain access to project resources, needs to know
and agree with these documents:
<dl>
  <dt><a href="https://www.debian.org/social_contract">Debian Social Contract</a> (SC)</dt>
  <dd>Defines the common principles for all work in Debian</dd>
  <dt><a href="https://www.debian.org/social_contract#guidelines">Debian Free Software Guidelines</a> (DFSG)</dt>
  <dd>Defines what is Free Software for Debian</dd>
  <dt><a href="https://www.debian.org/devel/dmup">Debian Machine Usage Policies</a> (DMUP)</dt>
  <dd>Defines the rules for accessing Debian machines</dd>
</dl>
</p>

<p>Since a person's identity in Debian is defined by the OpenPGP key, we
require a signed statement of agreement for each key that is used in the
project. This page allows to manage the agreements automatically.</p>

<p>The key is missing a signed statement of agreement with the SC, DFSG and
DMUP. To add it, paste it in the form below. For your convenince, you can
generate it with this command, and the site will recognise the text and accept
it without a need of manual validation of its content:</p>

<pre>
(
  echo "I agree to uphold the Social Contract and the Debian Free Software Guidelines in my Debian work."
  echo "I have read the Debian Machine Usage Policy and I accept them."
) | gpg --clearsign
</pre>

<form action="{% url 'fprs_agreement' key=person.lookup_key fpr=fpr.fpr %}" method="post">{% csrf_token %}
  {% for hidden in form.hidden_fields %}{{ hidden }}{% endfor %}
  {% for field in form.visible_fields %}
  {{ field.label_tag }}<br>
  {{ field }}<br>
  {{ field.errors }}
  {% endfor %}        
  {{ form.non_field_errors }}
  <input type="submit" value="Submit">
</form>

{% endblock %}


